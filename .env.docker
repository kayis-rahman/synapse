# SYNAPSE Docker Configuration - Version 1.0.0
# Environment variables for Docker deployment
#
# Usage: docker compose -f docker-compose.mcp.yml up -d
# Or: docker run -d --env-file .env.docker ...

# ============================================================================
# Server Configuration
# ============================================================================

# Server host (0.0.0.0 = listen on all interfaces)
HOST=0.0.0.0

# Server port (MCP HTTP endpoint)
PORT=8002

# ============================================================================
# RAG Configuration
# ============================================================================

# Project root directory (inside container)
PROJECT_ROOT=/app/data

# Chunk size for document segmentation (characters)
CHUNK_SIZE=500

# Chunk overlap for context preservation (characters)
CHUNK_OVERLAP=50

# Number of results to retrieve
TOP_K=3

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Disable Python output buffering (recommended for Docker)
PYTHONUNBUFFERED=1

# ============================================================================
# Paths (inside container)
# ============================================================================

# RAG data directory
RAG_DATA_DIR=/app/data

# Models directory (GGUF files)
MODELS_DIR=/app/models

# Configuration directory
CONFIG_DIR=/app/configs

# ============================================================================
# Performance Configuration
# ============================================================================

# Enable embedding caching
EMBEDDING_CACHE_ENABLED=true

# Embedding cache size (number of cached embeddings)
EMBEDDING_CACHE_SIZE=1000

# Batch size for embedding generation
BATCH_SIZE=32

# ============================================================================
# Query Configuration
# ============================================================================

# Enable query expansion (generate multiple queries)
QUERY_EXPANSION_ENABLED=true

# Number of expanded queries
QUERY_EXPANSION_TOP_K=3

# Enable context injection (orchestrator auto-injects context)
CONTEXT_INJECTION_ENABLED=false

# Enable remote file upload via HTTP
REMOTE_FILE_UPLOAD_ENABLED=true

# ============================================================================
# Model Configuration (BGE-M3 Embeddings)
# ============================================================================

# Embedding model path (inside container)
EMBEDDING_MODEL_PATH=/app/models/bge-m3-q8_0.gguf

# Embedding context size (tokens)
EMBEDDING_N_CTX=2048

# Number of GPU layers for embedding model
# 0 = CPU only, -1 = all layers (if GPU available)
EMBEDDING_N_GPU_LAYERS=0

# ============================================================================
# Query Performance
# ============================================================================

# Maximum retrieval time (milliseconds)
MAX_RETRIEVAL_TIME=5000

# ============================================================================
# HTTP Server Configuration
# ============================================================================

# RAG API host (for external clients)
RAG_API_HOST=0.0.0.0

# RAG API port
RAG_API_PORT=8002

# ============================================================================
# Advanced Configuration
# ============================================================================

# Disable RAG keyword (set this in system prompt to disable RAG)
RAG_DISABLE_KEYWORD=disable-rag
